CC = gcc
CFLAGS_EXP = -no-pie -static -g
CFLAGS_FUSE = -no-pie -static `pkg-config fuse3 --cflags --libs` -g

LDFLAGS_EXP = -L./ -luring -lpthread -Iinclude
LDFLAGS_FUSE = -L./ -lfuse3

OBJ = fs_extract/exploit fs_extract/hog_fs

all: $(OBJ)

fs_extract/exploit: exploit.c hog_bpf.c include/bpf_defs.h
	$(CC) $(CFLAGS_EXP) $^ -o $@ $(LDFLAGS_EXP)

fs_extract/hog_fs: hog_fs.c libfuse3.a
	$(CC) $(CFLAGS_FUSE) $^ -o $@ $(LDFLAGS_FUSE)

clean:
	rm $(OBJ)
